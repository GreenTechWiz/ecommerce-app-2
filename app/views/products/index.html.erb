<h1><%= @category ? "Showing Results for '#{@category.name}'" : "All Products" %></h1>

<%= form_tag("/products", method: :get) do %>
  <div class="row">
    <div class="col-lg-3">
      <%= label_tag(:category_id, "Select a Product Category:") %>
    </div>
    <div class="col-lg-6">
      <div class="form-group">
        <%= select_tag(:category_id, options_from_collection_for_select(@categories, :id, :name, @category ? @category.id : nil), prompt: "Select Product Category", class: "form-control") %>
      </div>
    </div>
    <div class="col-lg-3">
      <%= submit_tag("Search", class: "btn btn-primary") %>
    </div>
  </div>
<% end %>

<div class="row">
  <% @products.each do |product| %>
    <div class="product col-md-4">
      <h3><%= product.name %></h3>
      <p><%= product.price_format %></p>
      <%= link_to("/products/#{product.id}") do %>
        <%= image_tag(product.image_url) %>
      <% end %>
    </div>
  <% end %>
</div>